#summary Graphing PDNS using Cacti
#labels Phase-Deploy
= Graphing PDNS using Cacti =
There are several ways to monitor PowerDNS through Cacti, the data template we provide makes use of [http://nagios.sourceforge.net/docs/nrpe/NRPE.pdf NRPE] (Nagios Remote Plugin Executor).

Therefore the following steps will apply just to the above method but with a bit of fiddling you can use it with other input methods such SNMP.

== Configuring PowerDNS Server ==

 * Place *cacti_pdns.rb* under your */usr/local/bin* path
 * If you run your nrpe plugins under an unprivileged user (e.g nagios) then you will have to add to your sudoers file an entry like: 
{{{
nagios ALL = NOPASSWD: /usr/local/bin/cacti_pdns.rb
}}}
 * Create a configuration file for the nrpe plugin and set up the check as follows: 
{{{
command[check_cacti-pdns]=sudo /usr/local/bin/cacti_pdns.rb
}}}

== Configuring Cacti Server ==

 * Import the templates into Cacti through the Console management under Import/Export templates. In the example shown below the data template has been imported:

http://www.devco.net/images/cacti/cacti_import_templates.png

 * Once all the templates have been imported into Cacti you will have to set up the Data Sources for the hosts on which you have PowerDNS running in order to fetch the data from them.  Therefore you need to go to Management -> Data Sources and then click on Add which can be found in the top right corner of the page, as the screenshot underneath shows.

http://www.devco.net/images/cacti/cacti_datasource_add.png

The next interface is very straightforward. You just need to specify as a data template 'PowerDNS stats' the PowerDNS host you will be monitoring.

http://www.devco.net/images/cacti/cacti_select_datasource.png

 * Last step will be creating the graphs for PowerDNS hosts. As data needs collecting it might take a while for the graphs to show up with some relevant information. 

     Here will go the graphs creation screenshot